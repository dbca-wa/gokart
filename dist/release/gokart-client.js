!function e(t,o,n){function s(i,a){if(!o[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(r)return r(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var p=o[i]={exports:{}};t[i][0].call(p.exports,function(e){var o=t[i][1][e];return s(o?o:e)},p,p.exports,e,t,o,n)}return o[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t,o){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":2}],2:[function(e,t,o){var n=e("../../modules/_core"),s=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(e){return s.stringify.apply(s,arguments)}},{"../../modules/_core":3}],3:[function(e,t,o){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],4:[function(e,t,o){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,o){var n=this;this.serverUrl=window.location.origin+"/"+e,this.app=e,this.defaultModule=t,this.channelName="gokart("+this.serverUrl+")",this.timeoutTask=null,this.gokartWindow=null,window.addEventListener("storage",function(e){if(e.key.startsWith(this.channelName)){var t=JSON.parse(e.newValue);t.channel="localStorage",t.requestId&&n._processResponse(t)}})}function s(e){if(e.origin==window.location.origin){var t=JSON.parse(e.data);t.requestId&&(t.channel="postMessage",p[t.requestId.toString()]&&p[t.requestId.toString()]._processResponse(processResponse))}}var r=e("babel-runtime/core-js/json/stringify"),i=o(r),a=(new Date).getTime().toString()+Math.random().toString().substring(1),u=!!window.location.search&&window.location.search.toLowerCase().indexOf("debug=true")>=0,l=0,p={};n.prototype._processResponse=function(e){try{if(this._clearTimeoutTask(),response.clientId!==a)return;u&&console.log(Date()+" : Receive response with requestId '"+response.requestId+"' through "+response.channel+". response = "+(0,i.default)(response.data)),"OK"!==response.data.status&&alert(response.data.status+" : "+response.data.message)}finally{delete p[response.requestId.toString()]}},n.prototype._clearTimeoutTask=function(){this.timeoutTask&&(u&&console.log(Date()+" : Clear timeout task for app '"+this.app+"'"),clearTimeout(this.timeoutTask),this.timeoutTask=null)},n.prototype.populateRequest=function(e,t){return p[(++l).toString()]=this,{method:e,clientId:a,requestId:l,time:Date(),data:t}},n.prototype.open=function(e,t){t=t||this.defaultModule;var o=this,n=(0,i.default)(o.populateRequest("open",{module:t,options:e})),s=null,r=function(){u&&console.log(Date()+" : "+o.app+" is opened and send request to "+o.app+" through postMessage. request = "+n),o.gokartWindow.postMessage(n,window.location.origin),o._clearTimeoutTask,u&&console.log(Date()+" : Create a timeout task to resend the request  if postMessage to "+o.app+" is timeout. timeout = 10 seconds"),o.timeoutTask=setTimeout(function(){o.timeoutTask=null,u&&console.log(Date()+" : post request to "+o.app+" timeout"),this.gokartWindow&&!this.gokartWindow.closed()&&this.gokartWindow.close(),o.gokartWindow=null,s()},1e4)},s=function(){u&&console.log(Date()+" : Sent request to "+o.app+" through localStorage. request = "+n),localStorage.setItem(o.channelName+".open",n),o._clearTimeoutTask(),u&&console.log(Date()+" : Create a timeout task to send request to "+o.app+" if "+o.app+" is not opened before. timeout = 5 seconds"),o.timeoutTask=setTimeout(function(){o.timeoutTask=null,u&&console.log(Date()+" : Send request to "+o.app+" through localStorage timeout, try to open "+o.app),o.gokartWindow=window.open(o.serverUrl),o.gokartWindow.onload=function(){r()}},5e3)};this.gokartWindow&&!this.gokartWindow.closed()?r():s()},window.addEventListener("message",s,!1),t.GokartClient=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/json/stringify":1}]},{},[4]);
