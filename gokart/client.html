<html>
<head>
 <meta charset="UTF-8"> 
 <script src="dist/gokart-client.js"></script>
</head>
<body>
    <script language="javascript">
        if (window.top !== window.self) {
            var client = null
            var options = null
            var debug = false
            window.addEventListener("message",function (event) {
                var request = JSON.parse(event.data)
                if (request.method === "setOptions") {
                    options = request.options
                    debug = options.debug
                    client = new GokartClient(options.app,options.module,options.debug)
                    window.top.postMessage(JSON.stringify({requestId:"setStatus",data:{status:"OK",message:"Succeed"}}),options.origin)
                } else if(request.method === "open") {
                    var data = request.data
                    if (debug) console.log("open gokart, data = " + JSON.stringify(data))
                    client.open(data.options,data.module)
                }
            },false)
        }

    </script>
</body>
</html>

