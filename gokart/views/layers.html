{% extends 'base.html' %}

{% block offcanvas %}
<div class="tabs-content vertical" data-tabs-content="menu-tabs">
    {% block tab_panels %}
    <div class="tabs-panel" id="menu-tab-layers">
        <div class="row collapse">
            <div class="columns shrink">
                <ul class="tabs" data-tabs id="layers-tabs">
                    <li class="tabs-title is-active"><a href="#layers-active" aria-selected="true">Map Layers</a></li>
                    <li class="tabs-title"><a href="#layers-catalogue" aria-selected="true">Layer Catalogue</a></li>
                    <li class="tabs-title"><a href="#layers-categories" aria-selected="true">Categories</a></li>
                </ul>
            </div>
        </div>
        <div class="row collapse" id="layers-tab-panels">
            <div class="columns">
                <div class="tabs-content vertical" data-tabs-content="layers-tabs">
                    <script id="layers-active-template" type="text/x-handlebars-template">
                    {% raw %}
                        {{#each layers}}
                            <div class="row layer-row" data-id="{{ this.values_.id }}">
                                <div class="small-9">    
                                    <div class="layer-title">{{ this.values_.name }}</div>
                                    <div class="layer-id">{{ this.values_.catalogueEntry.id }}</div>
                                    {{#if this.values_.updated}}<small>Updated: {{ this.values_.updated }}</small>{{/if}}
                                </div>
                                <div class="small-3"><div class="text-right">
                                    <a data-action="remove" class="button alert">&#x2715;</a>
                                </div></div>
                            </div>
                        {{/each}}
                    {% endraw %}
                    </script>
                    <div class="tabs-panel is-active" id="layers-active"></div>
                    <div class="tabs-panel" id="layers-catalogue">
                        <div class="row">
                            <div class="switch tiny">
                                <input class="switch-input" id="switchBaseLayers" type="checkbox" checked/>
                                <label class="switch-paddle" for="switchBaseLayers">
                                    <span class="show-for-sr">Switch out base layers</span>
                                </label>
                            </div>
                            <label for="switchBaseLayers" class="side-label">Switch out base layers automatically</label>
                        </div>
                        <script id="layers-catalogue-template" type="text/x-handlebars-template">
                        {% raw %}
                        {{#each layers}}
                            <div class="row layer-row" data-id="{{ @key }}">
                                <div class="small-9">    
                                    <div class="layer-title">{{ this.name }}</div>
                                    <div class="layer-id">{{ this.id }}</div>
                                </div>
                                <div class="small-3"><div class="text-right">
                                     <div class="switch tiny">
                                        <input class="switch-input" id="switch_{{ @key }}" data-action="toggle" type="checkbox" {{#if this.olLayer}}checked{{/if}}/>
                                        <label class="switch-paddle" for="switch_{{ @key }}">
                                            <span class="show-for-sr">Toggle layer</span>
                                        </label>
                                    </div> 
                                </div></div>
                            </div>
                        {{/each}}
                        {% endraw %}
                        </script>
                        <div id="layers-catalogue-list"></div>  
                    </div>
                    <div class="tabs-panel" id="layers-categories">
                        browseable categories (jqtree?)
                    </div>
                </div>
            </div>
        </div>
        <div class="row collapse">
            <script id="layer-details-template" type="text/x-handlebars-template">
            {% raw %}
                <h4>{{ ol_layer.values_.name }}</h4>
                <p>{{ catalogue_layer.abstract }}</p>
            {% endraw %}
            </script>
            <div class="columns" id="layer-details"></div>
        </div>
    </div>
    {% endblock %}
</div>
{% endblock %}

{% block content %}
<ul class="tabs vertical map-widget" id="menu-tabs" data-tabs>
    {% block tabs %}
    <li class="tabs-title side-button"><a href="#menu-tab-layers" title="Map Layers">
        <svg class="icon"><use xlink:href="/static/images/iD-sprite.svg#icon-layers"></use></svg>
    </a></li>
    {% endblock %}
</ul>
{{ super() }}
{% endblock %}
